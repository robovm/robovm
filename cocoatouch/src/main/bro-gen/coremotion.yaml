package: org.robovm.apple.coremotion
include: [foundation.yaml]
library: CoreMotion
framework: CoreMotion
clang_args: ['-x', 'objective-c']
headers:
    - /System/Library/Frameworks/CoreMotion.framework/Headers/CoreMotion.h
    - /System/Library/Frameworks/CoreMotion.framework/Headers/CMAvailability.h
typedefs: {}
    
enums:
    CMAttitudeReferenceFrame: { first: CMAttitudeReferenceFrameXArbitraryZVertical, bits: true, marshaler: Bits.AsMachineSizedIntMarshaler }
    CMMagneticFieldCalibrationAccuracy: { first: CMMagneticFieldCalibrationAccuracyUncalibrated }
    CMErrorCode: { first: CMErrorNULL }
    CMMotionActivityConfidence: {}
        
classes:
    CoreMotion:
        annotations: ['@Marshaler(NSString.AsStringMarshaler.class)']

    CMError:
        extends: NSError

    CMAccelerometerData: {} # DONE
    CMAltimeter: # DONE
        methods:
            '-startRelativeAltitudeUpdatesToQueue:withHandler:':
                name: startRelativeAltitudeUpdates
                parameters:
                    handler:
                        type: '@Block VoidBlock2<CMAltitudeData, CMError>'
    CMAltitudeData: {} # DONE
    CMAttitude: # DONE
        methods:
            '-multiplyByInverseOfAttitude:':
                trim_after_first_colon: true
    CMDeviceMotion: {} # DONE
    CMGyroData: {} # DONE
    CMLogItem: {} # DONE
    CMMagnetometerData: {} # DONE
    CMMotionActivity: {} # DONE
    CMMotionActivityManager: # DONE
        methods:
            '-queryActivityStartingFromDate:toDate:toQueue:withHandler:':
                name: queryActivity
                parameters:
                    handler:
                        type: '@Block VoidBlock2<NSArray<CMMotionActivity>, CMError>'
            '-startActivityUpdatesToQueue:withHandler:':
                name: startActivityUpdates
                parameters:
                    handler:
                        type: '@Block VoidBlock1<CMMotionActivity>'
    CMMotionManager: # DONE
        methods:
            '-startAccelerometerUpdatesToQueue:withHandler:':
                name: startAccelerometerUpdates
                parameters:
                    handler:
                        type: '@Block VoidBlock2<CMAccelerometerData, CMError>'
            '-startGyroUpdatesToQueue:withHandler:':
                name: startGyroUpdates
                parameters:
                    handler:
                        type: '@Block VoidBlock2<CMGyroData, CMError>'
            '-startMagnetometerUpdatesToQueue:withHandler:':
                name: startMagnetometerUpdates
                parameters:
                    handler:
                        type: '@Block VoidBlock2<CMMagnetometerData, CMError>'
            '-startDeviceMotionUpdatesToQueue:withHandler:':
                name: startDeviceMotionUpdates
                parameters:
                    handler:
                        type: '@Block VoidBlock2<CMDeviceMotion, CMError>'
            '-startDeviceMotionUpdatesUsingReferenceFrame:':
                name: startDeviceMotionUpdates
            '-startDeviceMotionUpdatesUsingReferenceFrame:toQueue:withHandler:':
                name: startDeviceMotionUpdates
                parameters:
                    handler:
                        type: '@Block VoidBlock2<CMDeviceMotion, CMError>'
            '+availableAttitudeReferenceFrames':
                property: true
    CMPedometer: # DONE
        methods:
            '-queryPedometerDataFromDate:toDate:withHandler:':
                name: queryPedometerData
                parameters:
                    handler:
                        type: '@Block VoidBlock2<CMPedometerData, CMError>'
            '-startPedometerUpdatesFromDate:withHandler:':
                name: startPedometerUpdates
                parameters:
                    handler:
                        type: '@Block VoidBlock2<CMPedometerData, CMError>'
    CMPedometerData: {}
    CMStepCounter: # DONE
        methods:
            '-queryStepCountStartingFrom:to:toQueue:withHandler:':
                name: queryStepCount
                parameters:
                    handler:
                        type: '@Block("(@MachineSizedSInt,)") VoidBlock2<Long, CMError>'
            '-startStepCountingUpdatesToQueue:updateOn:withHandler:':
                name: startStepCountingUpdates
                parameters:
                    handler:
                        type: '@Block("(@MachineSizedSInt,,)") VoidBlock3<Long, NSDate, CMError>'

    # Structs
    CMAcceleration: {}
    CMRotationMatrix: {}
    CMQuaternion: {}
    CMCalibratedMagneticField: {}
    CMRotationRate: {}
    CMMagneticField: {}

protocols: {}


functions:
    # Make sure we don't miss any functions if new ones are introduced in a later version
    (CM.*):
        class: CoreMotion
        name: 'Function__#{g[0]}'

values:
    CMErrorDomain:
        class: CMError
        name: getClassDomain
   
    # Make sure we don't miss any values if new ones are introduced in a later version
    (CM.*):
        class: CoreMotion
        name: 'Value__#{g[0]}'

constants:
    # Make sure we don't miss any constants if new ones are introduced in a later version
    (CM.*):
        class: CoreMotion
        name: 'Constant__#{g[0]}'
